<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>API Commons</title>

    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800|Open+Sans+Condensed:300,700" rel="stylesheet" />
    <link href="/css/default.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/css/fonts.css" rel="stylesheet" type="text/css" media="all" />

    <!--[if IE 6]><link href="default_ie6.css" rel="stylesheet" type="text/css" /><![endif]-->

  <link rel="alternate" type="application/rss+xml" title="Jekyll • Simple, blog-aware, static sites - Feed" href="/feed.xml" />
  <link rel="alternate" type="application/atom+xml" title="Recent commits to Jekyll’s master branch" href="{{ site.repository }}/commits/master.atom" />

  <script type="text/javascript" src="/js/modernizr-2.5.3.min.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
  <script type="text/javascript" src="/js/lib/underscore-min.js"></script>
  <script type="text/javascript" src="/js/lib/base64.js"></script>
  <script type="text/javascript" src="/js/github.js"></script>
  <script type="text/javascript" src="/js/utilities.js"></script>   
      
  <script type="text/javascript">
  
        function getUrlVar(key){
            var result = new RegExp(key + "=([^&]*)", "i").exec(window.location.search); 
            return result && unescape(result[1]) || ""; 
          }
          
        $ThisPage = getUrlVar('p');    
        if($ThisPage==''){
            $ThisPage = "Home";
        }    
        
        $token = getUrlVar('t');
    
        var github = new Github({
            token: $token,
            auth: "oauth"
            });
  
        var repo = github.getRepo('kinlane', 'api-commons');
        
        repo.read('master','site.json',function(err, data){            
            if(!err) {
                
                $Site = jQuery.parseJSON(data);
        
                // Build the navigation
                $.each($Site['navigation'], function($key, $value) {
                    $value = $value + '?p=' + $key + '&t=' + $token;
                    $NavigationString = '<li><a href="' + $value + '" title="' + $key + '">' + $key + '</a></li>';
                   $("#primaryNavItems").append($NavigationString);           
                });
                
                // Build the Page Content
                $.each($Site['pages'], function($key, $value) {
                    if($key==$ThisPage){
                        $("#pageBody").html($value);
                        }             
                });  
             }          
        });
        
    </script> 
</head>
